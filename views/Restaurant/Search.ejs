<!DOCTYPE html>
<html>
<head>
    <% include ../Partials/_head //relative path %>
</head>
<body id="top">
    <% include ../Partials/_navbar //relative path %>
    <div class="container">
        
        <nav aria-label="Page navigation">
            <ul class="pagination">
            <!-- <li>
                <a href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                </a>
            </li> -->
            <% if(locals.result.length > 0){ %>
                <li><a href="#top" onclick="switchPage(1);">1</a></li>
            <% } %>
            <% if(locals.result.length > 10){ %>
                <li><a href="#top" onclick="switchPage(2);">2</a></li>
            <% } %>
            <% if(locals.result.length > 20){ %>
                <li><a href="#top" onclick="switchPage(3);">3</a></li>
            <% } %>
            <% if(locals.result.length > 30){ %>
                <li><a href="#top" onclick="switchPage(4);">4</a></li>
            <% } %>
            <% if(locals.result.length > 40){ %>
                <li><a href="#top" onclick="switchPage(5);">5</a></li>
            <% } %>
            <!-- <li>
                <a href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                </a>
            </li> -->
            </ul>
        </nav>

        <script>             
            function getRating(yelpID, index){
                $.ajax({
                    async: true,
                    type: 'POST',
                    url: '/Restaurant/Rating',
                    data: { id: yelpID} ,
                    success: function(rating) {
                        if(rating.count > 0){
                            var avg = (rating.sum / rating.count).toFixed(2);
                            $('#rating' + index).html("<label>ORWW's rating:&nbsp;</label>" + avg + " / 5");
                            $('#count'  + index).html("<label>ORWW's review count:&nbsp;</label>" + rating.count);
                        }
                        else{
                            $('#rating' + index).html("<label>ORWW's rating:&nbsp;</label>none");
                            $('#count'  + index).html("<label>ORWW's review count:&nbsp;</label>" + rating.count);
                        }                       
                    }
                });
            };

            function getReview(yelpID, index){
                $.ajax({
                    async: true,
                    type: 'POST',
                    url: '/Restaurant/GetMostRecentReview',
                    data: { yelpID: yelpID} ,
                    success: function(review) {
                        if(review){
                            $('#review' + index).html("<label>Recent Review:&nbsp;</label><br><p>\"" + review.description + "\"</p><div style=\"float: right;\">- " + review.firstName + ' ' + review.lastName.charAt(0) + ".</div><div class=\"clearfix\"</div>");
                        }
                        else{
                            $('#review' + index).html("<label>Recent Review:&nbsp;</label><br>Be the first to review this restaurant!");
                        }                   
                    }
                });
            };
                
        </script>

        <div id="list">  
            <% 
            var length = 10;
            if(locals.result.length < 10){ length = locals.result.length;}
            for(var i=0; i<length; ++i){ %>
                <div class="panel panel-default opaque">
                    <div class="panel-heading"><h3><%= locals.result[i].name %></h3></div>
                    <div class="panel-body row">
                        <div class="col-xs-3" style="border-right: 1px solid black;">
                            <img src="<%= locals.result[i].image_url %>" class="rest-img">
                        </div>
                        <div class="col-xs-4">
                            <div class="row" style="height: 125px;">
                                <div class="col-xs-5">
                                    <a title="Click here to go to the restaurant's yelp page." target="_blank" rel="noopener noreferrer" href="<%= locals.result[i].url %>"> <img src="/content/images/yelp2.png" class="logo"> </a>
                                </div>
                                <div class="col-xs-7">
                                        <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p>
                                        <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p>
                                </div>
                                
                            </div>
                            <div class="row" style="height: 125px;">
                                <div class="col-xs-5">
                                    <a title="Click here to go to the restaurant's profile page." onclick="clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');"> <img src="/content/images/temp.jpg" class="logo"> </a>
                                </div>
                                <div class="col-xs-7">
                                        <p id="rating<%= i %>"><label>ORWW's rating:&nbsp;</label> / 5</p>
                                        <p id="count<%= i %>"><label>ORWW's review count:&nbsp;</label></p>
                                </div>
                                <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));</script>
                            </div>                     
                        </div>
                        <div class="col-xs-5">
                            <div style="height: 250px;">
                                <div style="height: 95%;">
                                    <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p>
                                    <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p>
                                    <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p>
                                    <p id="review<%= i %>"><label>Recent Review:&nbsp;</label><br></p>
                                    <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));</script>
                                </div>
                                <div style="float: right;">
                                    <a href="/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>" 
                                        data-toggle="modal" data-target="#myModal" data-backdrop="false">View Map</a>
                                </div>
                                <div class="clearfix"></div>
                            </div>                     
                        </div>              
                    </div>
                </div>              
            <% } %>
        </div>
        <nav aria-label="Page navigation">
            <ul class="pagination">
            <!-- <li>
                <a href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                </a>
            </li> -->
            <% if(locals.result.length > 0){ %>
                <li><a href="#top" onclick="switchPage(1);">1</a></li>
            <% } %>
            <% if(locals.result.length > 10){ %>
                <li><a href="#top" onclick="switchPage(2);">2</a></li>
            <% } %>
            <% if(locals.result.length > 20){ %>
                <li><a href="#top" onclick="switchPage(3);">3</a></li>
            <% } %>
            <% if(locals.result.length > 30){ %>
                <li><a href="#top" onclick="switchPage(4);">4</a></li>
            <% } %>
            <% if(locals.result.length > 40){ %>
                <li><a href="#top" onclick="switchPage(5);">5</a></li>
            <% } %>
            <!-- <li>
                <a href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                </a>
            </li> -->
            </ul>
        </nav>
        <div style="margin-right: 0; padding-right: 0;">
            <% include ../Partials/_footer //relative path %>
        </div>
    </div>

    <div hidden>
        <form id="frm_prof" action="/Restaurant/Search" method="POST">
            <input id="input_id" type="text" name="id">
            <input id="input_alias" type="text" name="alias">
        </form>
    </div>

    <div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog">
            <div class="modal-content">
            </div>
        </div>
    </div>
    
    <script>    
        // when the modal is closed
        $('#myModal').on('hidden.bs.modal', function () {
            // remove the bs.modal data attribute from it
            $(this).removeData('bs.modal');
            // and empty the modal-content element
            $('#myModal .modal-content').empty();
            // $('body').attr("style", "padding-top: 60px; padding-right:0px;");           
        });
       
        function clickProfilePage(id, alias){
            // alert(id);
            // alert(alias);
            var form = document.getElementById('frm_prof');

            var input_id = document.getElementById('input_id');
            input_id.setAttribute("value", id);

            var input_alias = document.getElementById('input_alias');
            input_alias.setAttribute("value", alias);
 
            form.submit();
        };

        function switchPage(pagenum){
            $('#list').html('');
            if(pagenum === 1){
                $('#list').html(

                    " <% if(locals.result.length < 10){ %> "+
                    " <% for(var i=0; i<result.length; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\" onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    " <% } else { %> " +
                    " <% for(var i=0; i<10; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\" onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    "<% } %>"
                )             
            }
            else if(pagenum === 2){
                $('#list').html(

                    " <% if(locals.result.length < 20){ %> "+
                    " <% for(var i=10; i<result.length; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\" onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    " <% } else { %> " +
                    " <% for(var i=10; i<20; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\" onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    "<% } %>"

                )             
            }
            else if(pagenum === 3){
                $('#list').html(

                    " <% if(locals.result.length < 30){ %> "+
                    " <% for(var i=20; i<result.length; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\"  onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    " <% } else { %> " +
                    " <% for(var i=20; i<30; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\"  onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    "<% } %>"

                )             
            }
            else if(pagenum === 4){
                $('#list').html(

                    " <% if(locals.result.length < 40){ %> "+
                    " <% for(var i=30; i<result.length; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\"  onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    " <% } else { %> " +
                    " <% for(var i=30; i<40; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\"  onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    "<% } %>"

                )             
            }
            else if(pagenum === 5){
                $('#list').html(

                    " <% if(locals.result.length < 50){ %> "+
                    " <% for(var i=40; i<result.length; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\"  onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    " <% } else { %> " +
                    " <% for(var i=40; i<50; ++i){ %> " +
                    " <div class=\"panel panel-default opaque\"> " +
                        " <div class=\"panel-heading\"><h3><%= locals.result[i].name %></h3></div> " +
                        "   <div class=\"panel-body row\"> " +
                        "       <div class=\"col-xs-3\" style=\"border-right: 1px solid black;\"> " +
                        "       <img src=\"<%= locals.result[i].image_url %>\" class=\"rest-img\"> " +
                        "   </div>" +
                        "   <div class=\"col-xs-4\"> " + 
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's yelp page.\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"<%= locals.result[i].url %>\"> <img src=\"/content/images/yelp2.png\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p><label>Yelp's rating:&nbsp;</label> <%= locals.result[i].rating %> / 5</p> " +
                        "               <p><label>Yelp's review count:&nbsp;</label> <%= locals.result[i].review_count %></p> " +
                        "           </div>" +
                                
                        "       </div>" +
                        "       <div class=\"row\" style=\"height: 125px;\"> " + 
                        "           <div class=\"col-xs-5\"> " +
                        "               <a title=\"Click here to go to the restaurant's profile page.\"  onclick=\"clickProfilePage('<%= locals.result[i].id %>', '<%= locals.result[i].alias %>');\"> <img src=\"/content/images/temp.jpg\" class=\"logo\"> </a> " +
                        "           </div>" +
                        "           <div class=\"col-xs-7\"> " +
                        "               <p id=\"rating<%= i %>\"><label>ORWW's rating:&nbsp;</label> / 5</p> " +
                        "               <p id=\"count<%= i %>\"><label>ORWW's review count:&nbsp;</label></p>" +
                        "           </div>" +
                        "           <script>getRating('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " + 
                        "       </div>" +                    
                        "   </div> " +
                        "   <div class=\"col-xs-5\"> " +
                        "        <div style=\"height: 250px;\"> " +
                        "            <div style=\"height: 230px;\"> " +
                        "               <p><label>Location:&nbsp;</label><%= locals.result[i].location.display_address %></p> " +
                        "               <p><label>Phone:&nbsp;</label><%= locals.result[i].display_phone %></p> " +
                        "               <p><label>Price:&nbsp;</label><%= locals.result[i].price %></p> " +
                        "               <p id=\"review<%= i %>\"><label>Recent Review:&nbsp;</label><br></p> " +
                        "               <script>getReview('<%= locals.result[i].id %>', parseInt('<%= i %>'));<\/script> " +
                        "            </div> " +
                        "           <div style=\"float: right;\"> " +
                        "                <a href=\"/Restaurant/Map?restaurant=<%= locals.result[i].alias %>&latitude=<%= locals.result[i].coordinates['latitude'] %>&longitude=<%= locals.result[i].coordinates['longitude'] %>\" data-toggle=\"modal\" data-target=\"#myModal\" data-backdrop=\"false\">View Map</a>" +
                        "            </div>" +
                        "            <div class=\"clearfix\"></div> " +
                        "        </div> " +                     
                        "    </div> " +                     
                        " </div>" +
                    " </div>" +
                    " <% } %> " + 
                    "<% } %>"

                )             
            }
            
            
        };
     
    </script>


    
</body>

</html>